<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Bohemian Integrations</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wdth,wght@0,75..100,300..800;1,75..100,300..800&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap"
        rel="stylesheet">

    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/animate/animate.min.css" rel="stylesheet">
    <link href="lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">


    <!-- Customized Bootstrap Stylesheet -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Template Stylesheet -->
    <link href="css/style.css" rel="stylesheet">


    <style>
        /* ‚úÖ Gentle wiggle and glow animation for cart icon */
        @keyframes cartWiggle {

            0%,
            100% {
                transform: scale(1) rotate(0deg);
                filter: drop-shadow(0 0 0px #00ff80);
            }

            25% {
                transform: scale(1.2) rotate(-5deg);
                filter: drop-shadow(0 0 8px #00ff80);
            }

            50% {
                transform: scale(1.1) rotate(5deg);
            }

            75% {
                transform: scale(1.2) rotate(-5deg);
            }
        }

        .cart-animate {
            animation: cartWiggle 0.8s ease-in-out;
        }
    </style>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>

    <!-- Add this inside <head> -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>


</head>

<body>

    <!-- Spinner Start -->
    <div id="spinner"
        class="show bg-white position-fixed translate-middle w-100 vh-100 top-50 start-50 d-flex align-items-center justify-content-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="sr-only">Bohemian Integrations</span>
        </div>
    </div>
    <!-- Spinner End -->

    <!-- Navbar & Hero Start -->
    <div class="container-fluid position-relative p-0 fixed-top" style="position:fixed;top: 0%;">
        <nav class="navbar navbar-expand-lg navbar-light px-4 px-lg-5 py-3 py-lg-0">
            <a href="" class="navbar-brand p-0">
                <h1 style="color: green;"><img src="img/Bohemian Integrations logo.jpg" alt="Logo"
                        style="width: 70px;height: 70px;border-radius: 50px;">Bohemian Integrations</h1>

            </a>
            <a href="cart.html" class="position-relative me-4 my-auto">
                <i class="fa fa-shopping-bag fa-2x"></i>
                <span id="cart-count"
                    class=" cart-count position-absolute bg-secondary rounded-circle d-flex align-items-center justify-content-center text-dark px-1"
                    style="top: -5px; left: 15px; height: 20px; min-width: 20px;">0</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
                <span class="fa fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarCollapse">
                <div class="navbar-nav ms-auto py-0">
                    <a href="index.html" class="nav-item nav-link active">Home</a>
                    <a href="about.html" class="nav-item nav-link">About</a>
                    <a href="service.html" class="nav-item nav-link">Services</a>

                    <div class="nav-item dropdown">
                        <a href="product.html" class="nav-link dropdown-toggle" data-bs-toggle="dropdown">Products</a>
                        <div class="dropdown-menu m-0">
                            <a href="product.html" class="dropdown-item">All Products</a>
                            <a href="MeditationandWellnessCandles.html" class="dropdown-item">üïØÔ∏èMeditation and Wellness
                                Candles</a>
                            <a href="HerbalandAromaticProducts.html" class="dropdown-item">üåøHerbal and Aromatic
                                Products</a>
                            <a href="HealingCrystalsandGemstones.html" class="dropdown-item">üíéHealing Crystals and
                                Gemstones(Jewelry)</a>
                            <a href="SacredSpaceDecor.html" class="dropdown-item">üåªSacred Space Decor</a>
                            <a href="MindfulApparel.html" class="dropdown-item">üëïMindful Apparel and Clothing</a>
                        </div>
                    </div>
                    <a href="cart.html" class="nav-item nav-link">Cart</a>
                    <a href="Checkout.html" class="nav-item nav-link">Checkout</a>
                    <a href="blog.html" class="nav-item nav-link">Blog</a>
                    <a href="contact.html" class="nav-item nav-link">Contact</a>
                </div>
                <div class="d-flex m-3 me-0">
                    <button class="btn-search btn border border-secondary btn-md-square rounded-circle bg-white me-4"
                        data-bs-toggle="modal" data-bs-target="#searchModal"><i
                            class="fas fa-search text-primary"></i></button>
                   <a href="cart.html" class="position-relative me-4 my-auto">
                <i class="fa fa-shopping-bag fa-2x"></i>
                <span id="cart-count"
                    class=" cart-count position-absolute bg-secondary rounded-circle d-flex align-items-center justify-content-center text-dark px-1"
                    style="top: -5px; left: 15px; height: 20px; min-width: 20px;">0</span>
            </a>
                    <a href="#" class="my-auto">
                        <i class="fas fa-user fa-2x"></i>
                    </a>
                </div>

            </div>
        </nav>

        <!-- Header Start -->
        <div class="container-fluid bg-breadcrumb">
            <div class="container text-center py-5" style="max-width: 900px;">
                <h4 class="text-white display-4 mb-4 wow fadeInDown" data-wow-delay="0.1s">
                    ü§ó<BR>CHECK<BR>üí∏<BR>OUT<BR>üòé</h4>

            </div>
        </div>
        <!-- Header End -->
    </div>
    <!-- Navbar & Hero End -->

    <!-- Modal Search Start -->
    <div class="modal fade" id="searchModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen">
            <div class="modal-content rounded-0">
                <div class="modal-header">
                    <h4 class="modal-title mb-0" id="exampleModalLabel">Search by keyword</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body d-flex align-items-center">
                    <div class="input-group w-75 mx-auto d-flex">
                        <input type="search" class="form-control p-3" placeholder="keywords"
                            aria-describedby="search-icon-1">
                        <span id="search-icon-1" class="input-group-text btn border p-3"><i
                                class="fa fa-search text-white"></i></span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Search End -->



    <!-- Checkout Page Start -->
    <div class="container-fluid py-5">
        <div class="container py-5">
            <h1 class="mb-4"><b>Order Summary</b></h1>

            <div class="col-md-12 col-lg-6 col-xl-5">
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th scope="col">Products</th>
                                <th scope="col">Name</th>
                                <th scope="col">Price</th>
                                <th scope="col">Quantity</th>
                                <th scope="col">Total</th>
                            </tr>
                        </thead>
                        <tbody id="checkout-body"></tbody>
                        <tfoot>
                            <tr>
                                <td colspan="4" class="text-end fw-bold py-3">Subtotal:</td>
                                <td id="checkout-subtotal" class="py-3">KES 0</td>
                            </tr>
                            <tr>
                                <td colspan="4" class="text-end fw-bold py-3">Logistics Fee:</td>
                                <td id="checkout-shipping" class="py-3">KES 0</td>
                            </tr>
                            <tr>
                                <td colspan="4" class="text-end fw-bold py-3">Total:</td>
                                <td id="checkout-total" class="py-3 fw-bold text-success">KES 0</td>
                            </tr>
                        </tfoot>

                    </table>
                </div>

                <h1 class="mb-4"><b>Billing Details</b></h1>
                <p style="color: burlywood;"><i><b>Thank you for shopping with us üíö</b></i></p>
                <p>Please Provide us with the following details for delivery purposes.</p>
                <form action="#">
                    <div class="row g-5">
                        <div class="col-md-12 col-lg-6 col-xl-7">
                            <div class="row">
                                <div class="col-md-12 col-lg-6">
                                    <div class="form-item w-100">
                                        <label class="form-label my-3">First Name<sup>*</sup></label>
                                        <input type="text" class="form-control">
                                    </div>
                                </div>
                                <div class="col-md-12 col-lg-6">
                                    <div class="form-item w-100">
                                        <label class="form-label my-3">Last Name<sup>*</sup></label>
                                        <input type="text" class="form-control">
                                    </div>
                                </div>
                            </div>

                            
                            <div class="form-item">
                                <label class="form-label my-3">Town/City<sup>*</sup></label>
                                <input type="text" class="form-control">
                            </div>

                            <div class="form-item">
                                <label class="form-label my-3">Region <sup>*</sup></label>
                                <input type="text" class="form-control" placeholder="e.g Kikuyu, Ngong, Karen">
                            </div>
                            <!-- üìç Exact Location Selector -->
<div class="form-item my-3">
  <button id="select-location" type="button" class="btn border-secondary text-primary w-100">
    üìç Select Your Exact Location
  </button>
  <p id="location-display" class="mt-2 text-success small"></p>
</div>

<!-- üó∫Ô∏è Map Container -->
<div id="map-container" style="display:none; height:300px; border-radius:12px; overflow:hidden; margin-top:10px;">
  <div id="map" style="width:100%; height:100%;"></div>
  <button id="confirm-location" type="button" class="btn btn-success w-100 mt-3">
    ‚úÖ Confirm Location
  </button>
</div>


                            <!--<div class="form-item">
                                <label class="form-label my-3">Country<sup>*</sup></label>
                                <input type="text" class="form-control">
                            </div>-->
                           
                            <div class="form-item">
                                <label class="form-label my-3">Mobile<sup>*</sup></label>
                                <input type="tel" class="form-control">
                            </div>
                            <div class="form-item">
                                <label class="form-label my-3">Email Address<sup>*</sup></label>
                                <input type="email" class="form-control" placeholder="To receive your invoice and receipt">
                            </div>
                            <div class="form-check my-3">
                                <input type="checkbox" class="form-check-input" id="Account-1" name="Accounts"
                                    value="Accounts">
                                <label class="form-check-label" for="Account-1">Create an account?</label>
                            </div>
                            <hr>
                            <div class="form-check my-3">
                                <input class="form-check-input" type="checkbox" id="Address-1" name="Address"
                                    value="Address">
                                <label class="form-check-label" for="Address-1">Scheduled Delivery date and time</label>
                            </div>
                            <div class="form-item">
                                <textarea name="text" class="form-control" spellcheck="false" cols="30" rows="11"
                                    placeholder="Kindly note that the order may take between 2-3 days for a successful delivery ()"></textarea>
                            </div>
                        </div>

                        <div class="row g-4 text-center align-items-center justify-content-center pt-4">
                                <button id="place-order" type="button"
                                    class="btn border-secondary py-3 px-4 text-uppercase w-100 text-primary">
                                    Place Your Order ü§©‚úÖ
                                </button>
                            </div>
                        
                            <h1 class="mb-4"><b>Your Preferred Payment methods</b></h1>
                            <p>Kindly Select Your preferred payment method</p>
                            <div
                                class="row g-4 text-center align-items-center justify-content-center border-bottom py-3">
                                <div class="col-12">
                                    <div class="form-check text-start my-3">
                                        <input type="radio" class="form-check-input bg-primary border-0"
                                            id="mpesaExpress" name="paymentMethod" value="mpesa">
                                        <label class="form-check-label" for="mpesaExpress">M-Pesa Express</label>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="row g-4 text-center align-items-center justify-content-center border-bottom py-3">
                                <div class="col-12">
                                    <div class="form-check text-start my-3">
                                        <input type="radio" class="form-check-input bg-primary border-0"
                                            id="Payments-1" name="Payments" value="Payments">
                                        <label class="form-check-label" for="Payments-1">Airtel Money</label>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="row g-4 text-center align-items-center justify-content-center border-bottom py-3">
                                <div class="col-12">
                                    <div class="form-check text-start my-3">
                                        <input type="radio" class="form-check-input bg-primary border-0"
                                            id="Delivery-1" name="Delivery" value="Delivery">
                                        <label class="form-check-label" for="Delivery-1">Cash On Delivery</label>
                                        <p class="text-start text-dark">(To reserve order using this payment method ,kindly pay 50% of the total .Thankyouü§é) </p>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="row g-4 text-center align-items-center justify-content-center border-bottom py-3">
                                <div class="col-12">
                                    <div class="form-check text-start my-3">
                                        <input type="radio" class="form-check-input bg-primary border-0"
                                            id="Transfer-1" name="Transfer" value="Transfer">
                                        <label class="form-check-label" for="Transfer-1">Direct Bank Transfer</label>
                                    </div>
                                    <p class="text-start text-dark">Make your payment directly into our bank account.
                                        Please
                                        use your Order ID as the payment reference. Your order will not be shipped until
                                        the
                                        funds have cleared in our account.</p>
                                </div>
                            </div>

                            
                            <div
                                class="row g-4 text-center align-items-center justify-content-center border-bottom py-3">
                                <div class="col-12">
                                    <div class="form-check text-start my-3">
                                        <input type="radio" class="form-check-input bg-primary border-0"
                                            id="Paypal-1" name="Paypal" value="Paypal">
                                        <label class="form-check-label" for="Paypal-1">Paypal</label>
                                    </div>
                                </div>
                            </div>
                            <div class="row g-4 text-center align-items-center justify-content-center pt-4">
                                <button id="procedPaymentBtn" type="button"
                                    class="btn border-secondary py-3 px-4 text-uppercase w-100 text-primary">
                                    Proceed to Payment ü§óüí∏
                                    
                                </button>
                                <h1 style="color: rgb(1, 151, 1);"><i><b>We appreciate you so much üôèüèº , and wish you the best that life has to offer ‚ú®</i></b></h1>
                                <br>
                                <P>üíñ</P>
                                <h1> Bohemian Integrations </h1>
                                
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <!-- Checkout Page End -->


        <!-- Footer Start -->
        <div class="container-fluid footer py-5 wow fadeIn" data-wow-delay="0.2s">
            <div class="container py-5">
                <div class="row g-5 mb-5 align-items-center">
                    <!--<div class="col-lg-7">
                    <div class="position-relative mx-auto">
                        <input class="form-control rounded-pill w-100 py-3 ps-4 pe-5" type="text"
                            placeholder="Email address to Subscribe">
                        <button type="button"
                            class="btn btn-secondary rounded-pill position-absolute top-0 end-0 py-2 px-4 mt-2 me-2">Subscribe</button>
                    </div>
                </div>-->
                    <div class="col-lg-5">
                        <div class="d-flex align-items-center justify-content-center justify-content-lg-end">
                            <a class="btn btn-secondary btn-md-square rounded-circle me-3" href=""><i
                                    class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-secondary btn-md-square rounded-circle me-3" href=""><i
                                    class="fab fa-tiktok"></i></a>
                            <a class="btn btn-secondary btn-md-square rounded-circle me-3" href=""><i
                                    class="fab fa-instagram"></i></a>
                            <a class="btn btn-secondary btn-md-square rounded-circle me-0" href=""><i
                                    class="fab fa-youtube"></i></a>
                        </div>
                    </div>
                </div>
                <div class="row g-5">
                    <div class="col-md-6 col-lg-6 col-xl-3">
                        <div class="footer-item d-flex flex-column">
                            <div class="footer-item">
                                <h3 class="text-white mb-4"><img src="img/Bohemian Integrations logo.jpg" alt="Logo"
                                        style="width: 70px;height: 70px;border-radius: 50px;">Bohemian Integrations
                                </h3>
                                <p class="mb-3">Connecting you,with your inner selfüßò‚ú®</p>
                            </div>
                            <div class="position-relative">
                                <input class="form-control rounded-pill w-100 py-3 ps-4 pe-5" type="text"
                                    placeholder="Enter your email">
                                <button type="button"
                                    class="btn btn-secondary rounded-pill position-absolute top-0 end-0 py-2 mt-2 me-2">SignUp</button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-6 col-xl-3">
                        <div class="footer-item d-flex flex-column">
                            <h4 class="text-white mb-4">Bohemian Integrations</h4>
                            <a href="about.html"><i class="fas fa-angle-right me-2"></i> About us</a>
                            <a href="service.html"><i class="fas fa-angle-right me-2"></i> Services</a>
                            <a href="product.html"><i class="fas fa-angle-right me-2"></i> Products</a>
                            <a href="cart.html"><i class="fas fa-angle-right me-2"></i> Cart</a>
                            <a href="Checkout.html"><i class="fas fa-angle-right me-2"></i> Checkout</a>
                            <a href="blog.html"><i class="fas fa-angle-right me-2"></i> Our Blog</a>
                            <a href="contact.html"><i class="fas fa-angle-right me-2"></i> Contact us</a>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-6 col-xl-3">
                        <div class="footer-item d-flex flex-column">
                            <h4 class="text-white mb-4">Business Hours</h4>
                            <div class="mb-3">
                                <h6 class="text-muted mb-0">Mon - Friday:</h6>
                                <p class="text-white mb-0">09.00 am to 07.00 pm</p>
                            </div>
                            <div class="mb-3">
                                <h6 class="text-muted mb-0">Saturday:</h6>
                                <p class="text-white mb-0">10.00 am to 05.00 pm</p>
                            </div>
                            <div class="mb-3">
                                <h6 class="text-muted mb-0">Vacation:</h6>
                                <p class="text-white mb-0">All Sunday is our vacation üçπüå¥</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 col-lg-6 col-xl-3">
                        <div class="footer-item d-flex flex-column">
                            <h4 class="text-white mb-4">Contact Info</h4>
                            <a href="#"><i class="fa fa-map-marker-alt me-2"></i> Kileleshwa , Nairobi, Kenya</a>
                            <a href="mailto:info@example.com"><i class="fas fa-envelope me-2"></i>
                                info@bohemianintegrations.com</a>
                            <a href="mailto:info@example.com"><i class="fas fa-envelope me-2"></i>
                                bohemianintegrations@gmail.com</a>
                            <a href="tel:+012 345 67890"><i class="fas fa-phone me-2"></i> +254 784587728</a>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer End -->

        <!-- Copyright Start -->
        <div class="container-fluid copyright py-4">
            <div class="container">
                <div class="row g-4 align-items-center">
                    <div class="col-md-6 text-center text-md-start mb-md-0">
                        <span class="text-body"><a href="https://bohemianintegrations.shop"
                                class="border-bottom text-white"><i
                                    class="fas fa-copyright text-light me-2"></i>Bohemian
                                Integrations</a>, All right
                            reserved.</span>
                    </div>
                    <div class="col-md-6 text-center text-md-end text-body">
                        <!--/*** This template is free as long as you keep the below author‚Äôs credit link/attribution link/backlink. ***/-->
                        <!--/*** If you'd like to use the template without the below author‚Äôs credit link/attribution link/backlink, ***/-->
                        <!--/*** you can purchase the Credit Removal License from "https://htmlcodex.com/credit-removal". ***/-->
                        Designed By <a class="border-bottom text-white"
                            href="https://3ric3mmanu3l.co.ke">3ric3mmanu3l</a>
                        <!--Designed By <a class="border-bottom text-white" href="https://htmlcodex.com">HTML Codex</a>-->
                    </div>
                </div>
            </div>
        </div>
        <!-- Copyright End -->



        <!-- Back to Top -->
        <a href="#" class="btn btn-primary border-3 border-primary rounded-circle back-to-top"><i
                class="fa fa-arrow-up"></i></a>


        <!-- JavaScript Libraries -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="lib/easing/easing.min.js"></script>
        <script src="lib/waypoints/waypoints.min.js"></script>
        <script src="lib/lightbox/js/lightbox.min.js"></script>
        <script src="lib/owlcarousel/owl.carousel.min.js"></script>

        <!-- Template Javascript -->
        <script src="js/main.js"></script>


        <!-- ‚úÖ Universal Cart Count + Animation Script -->
        <script>

            // ‚úÖ Universal cart count + animation function (works on any page)
            function updateCartCount() {
                const counts = document.querySelectorAll('.cart-count');
                const cartIcons = document.querySelectorAll('.fa-shopping-bag');
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);

                // Update the count text
                counts.forEach(c => c.textContent = totalItems);

                // Animate the icons for feedback
                cartIcons.forEach(icon => {
                    icon.classList.add('cart-animate');
                    setTimeout(() => icon.classList.remove('cart-animate'), 800);
                });
            }

            // üåº Center Toast product added to cart Popup Logic
            function showCartToast(product) {
                const toast = document.getElementById('cart-toast');
                const toastImg = document.getElementById('toast-image');
                const toastName = document.getElementById('toast-name');
                const toastPrice = document.getElementById('toast-price');
                const toastQty = document.getElementById('toast-qty');

                // Fill details
                toastImg.src = product.image;
                toastName.textContent = product.name;
                toastPrice.textContent = `KES ${product.price}`;
                toastQty.textContent = `Qty: ${product.quantity}`;

                // Show toast
                toast.classList.add('show');

                // Hide after 4 seconds
                setTimeout(() => toast.classList.remove('show'), 4000);
            }

            // ‚ú® Close manually or via buttons
            document.addEventListener('click', (e) => {
                if (
                    e.target.classList.contains('close-toast') ||
                    e.target.id === 'toast-continue'
                ) {
                    document.getElementById('cart-toast').classList.remove('show');
                }
            });

            document.getElementById('toast-view-cart').addEventListener('click', () => {
                window.location.href = 'cart.html';
            });



            // Run when page loads
            document.addEventListener('DOMContentLoaded', () => {
                const addToCartButtons = document.querySelectorAll('.add-to-cart'); // Buttons you‚Äôll mark

                addToCartButtons.forEach(button => {
                    button.addEventListener('click', (event) => {
                        event.preventDefault();   // prevent page scroll or reload
                        event.stopPropagation();  // just in case parent elements react


                        const productCard = event.target.closest('.product-item');
                        const qtyInput = productCard.querySelector('.product-qty');
                        const qty = parseInt(qtyInput?.value || "1");

                        const product = {
                            name: productCard.querySelector('.product-name').textContent,
                            price: parseFloat(productCard.querySelector('.product-price').textContent.replace(/[^\d.]/g, '')),
                            image: productCard.querySelector('img').getAttribute('src'),
                            quantity: qty
                        };


                        // Get current cart items or create empty array
                        let cart = JSON.parse(localStorage.getItem('cart')) || [];

                        // Check if product already exists
                        const existing = cart.find(item => item.name === product.name);
                        if (existing) {
                            existing.quantity += 1;
                        } else {
                            cart.push(product);
                        }

                        localStorage.setItem('cart', JSON.stringify(cart));

                        // --- pretty animated popup ---
                        /*const msg = document.createElement('div');
                        msg.textContent = `${product.name} added to cart!`;
                        msg.classList.add('added-to-cart-popup');
                        document.body.appendChild(msg);
                        setTimeout(() => msg.remove(), 1500);*/

                        showCartToast(product);



                        // ‚úÖ update cart icon immediately after adding
                        updateCartCount();



                    });
                });

                // ‚úÖ Load the correct count from localStorage when page first loads
                updateCartCount();
            });
        </script>

        <!--To get cart content automatically loaded to checkout-->
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const checkoutBody = document.getElementById('checkout-body');
                const subtotalEl = document.getElementById('checkout-subtotal');
                const shippingEl = document.getElementById('checkout-shipping');
                const totalEl = document.getElementById('checkout-total');
                const cartCountEls = document.querySelectorAll('.cart-count');

                let cart = JSON.parse(localStorage.getItem('cart')) || [];

                // If cart is empty, show message
                if (cart.length === 0) {
                    checkoutBody.innerHTML = `
      <tr>
        <td colspan="5" class="text-center py-5 text-muted">
          üõí Your cart is empty. <a href="product.html" class="text-primary">Continue shopping</a>.
        </td>
      </tr>`;
                    return;
                }

                let subtotal = 0;
                const shipping = 0;

                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;

                    const row = `
      <tr>
        <td><img src="${item.image}" class="img-fluid rounded-circle" style="width: 70px; height: 70px;"></td>
        <td class="py-4">${item.name}</td>
        <td class="py-4">KES ${item.price.toFixed(2)}</td>
        <td class="py-4">${item.quantity}</td>
        <td class="py-4 fw-bold">KES ${itemTotal.toFixed(2)}</td>
      </tr>`;
                    checkoutBody.insertAdjacentHTML('beforeend', row);
                });

                // Update totals
                subtotalEl.textContent = `KES ${subtotal.toFixed(2)}`;
                shippingEl.textContent = `KES ${shipping.toFixed(2)}`;
                totalEl.textContent = `KES ${(subtotal + shipping).toFixed(2)}`;

                // Update cart icon count
                const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
                cartCountEls.forEach(el => el.textContent = totalItems);
            });
        </script>


        
<!-- SweetAlert2 CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>



 <!-- SweetAlert2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- EmailJS CDN -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script type="text/javascript">
  (function(){
    emailjs.init("ommjsXJAcw0S9_AW2"); // Replace with your EmailJS public key
  })();
</script>

<!-- Canvas Confetti CDN -->
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
document.getElementById("place-order").addEventListener("click", async () => {
    const cart = JSON.parse(localStorage.getItem("cart") || "[]");

    // Collect billing details
    const firstName = document.querySelectorAll('input[type="text"]')[0]?.value?.trim() || "";
    const lastName = document.querySelectorAll('input[type="text"]')[1]?.value?.trim() || "";
    const name = (firstName + " " + lastName).trim();
    const email = document.querySelector('input[type="email"]')?.value?.trim() || "";
    const phone = document.querySelector('input[type="tel"]')?.value?.trim() || "";
    const address = document.querySelector('input[placeholder="e.g Kikuyu, Ngong, Karen"]')?.value?.trim() || document.querySelector('input[placeholder="Town/City"]')?.value?.trim() || "";

    // Validation
    if (!name || !email || !phone || cart.length === 0) {
        return Swal.fire({
            icon: "warning",
            title: "Missing Information",
            text: "Please fill all required fields and ensure your cart isn't empty.",
            background: "#fff",
            color: "#333",
            showClass: { popup: 'animate__animated animate__fadeInDown' },
            hideClass: { popup: 'animate__animated animate__fadeOutUp' }
        });
    }

    // Build order summary
    let orderText = `üåø New Order from Bohemian Integrations Website\n\n`;
    orderText += `üë§ Name: ${name}\nüìß Email: ${email}\nüìû Phone: ${phone}\nüè† Address: ${address}\n\nüõçÔ∏è Items Ordered:\n`;

    let subtotal = 0;
    cart.forEach(item => {
        const itemTotal = item.price * item.quantity;
        subtotal += itemTotal;
        orderText += `- ${item.name} √ó ${item.quantity} = KES ${itemTotal.toFixed(2)}\n`;
    });

    const shipping = 0;
    const total = subtotal + shipping;
    orderText += `\nüí∞ Subtotal: KES ${subtotal.toFixed(2)}\nüöö Shipping: KES ${shipping.toFixed(2)}\nüßæ Total: KES ${total.toFixed(2)}\n\nüôè Thank you for shopping with Bohemian Integrations üåø`;

    try {
        // Show loading popup
        Swal.fire({
            title: "Placing your order...",
            html: "Generating invoice & sending emails üíö",
            allowOutsideClick: false,
            didOpen: () => Swal.showLoading(),
            background: "#f0fdf4",
            color: "#065f46",
            showClass: { popup: 'animate__animated animate__fadeIn' },
            hideClass: { popup: 'animate__animated animate__fadeOut' }
        });

        // Send email via EmailJS
        await emailjs.send(
            "service_maebvvw",      // Replace with your EmailJS Service ID
            "template_713h5ne",     // Replace with your EmailJS Template ID
            {
                client_name: name,
                client_email: email,
                business_email: "bohemianintegrations@gmail.com",  // Replace with your business Gmail
                order_details: orderText
            }
        );

        Swal.close();

        // --- Premium Success Popup with Confetti ---

        // Popup 1: Order placed successfully
        await Swal.fire({
            title: "Order Placed Successfully üéâ",
            html: "Thank you for shopping with Bohemian Integrations! üíö",
            icon: "success",
            background: "#ecfdf5",
            color: "#065f46",
            timer: 5000,
            showConfirmButton: false,
            showClass: { popup: 'animate__animated animate__fadeInDown' },
            hideClass: { popup: 'animate__animated animate__fadeOutUp' },
            didOpen: () => {
                // Confetti effect
                confetti({
                    particleCount: 150,
                    spread: 70,
                    origin: { y: 0.6 },
                    colors: ['#22c55e', '#10b981', '#34d399']
                });
            }
        });

        // Popup 2: Proceed to payment
        await Swal.fire({
            title: "Kindly Proceed to Payment üíö",
            html: "When ready, complete payment via your preferred method. We wish you the best! ‚ú®",
            icon: "info",
            background: "#f0fdf4",
            color: "#065f46",
            timer: 6000,
            showConfirmButton: true,
            confirmButtonText: "Okay, proceed",
            showClass: { popup: 'animate__animated animate__fadeInDown' },
            hideClass: { popup: 'animate__animated animate__fadeOutUp' }
        });

        // Clear cart after confirmation
        localStorage.removeItem("cart");

    } catch (err) {
        Swal.close();
        console.error(err);
        Swal.fire({
            icon: "error",
            title: "Order Error",
            text: err.text || "Something went wrong. Please try again.",
            background: "#fff1f2",
            color: "#b91c1c",
            showClass: { popup: 'animate__animated animate__shakeX' },
            hideClass: { popup: 'animate__animated animate__fadeOut' }
        });
    }
});
</script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- SweetAlert2 & Confetti -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<script>
document.getElementById("procedPaymentBtn").addEventListener("click", async () => {
  // Check if M-PESA is selected
  const mpesaSelected = document.querySelector('input[type="radio"][id="mpesaExpress"]')?.checked;
  if (!mpesaSelected) {
    return Swal.fire({
      icon: "warning",
      title: "No Payment Method Selected üòÖ",
      text: "Please select M-PESA Express to proceed with payment.",
      background: "linear-gradient(135deg,#fffaf0,#f0fff4)",
      confirmButtonColor: "#3085d6",
      showClass: { popup: "animate__animated animate__fadeInDown" },
      hideClass: { popup: "animate__animated animate__fadeOutUp" }
    });
  }

  try {
    // Prompt user for M-PESA number
    const phoneInput = await Swal.fire({
      title: "Enter Your M-PESA Number üì±",
      input: "text",
      inputLabel: "Accepted formats: 07XXXXXXXX or 01XXXXXXXX",
      inputPlaceholder: "e.g. 0712345678 or 0112345678",
      background: "linear-gradient(135deg, #fdfbfb, #ebedee)",
      showCancelButton: true,
      confirmButtonText: "Proceed to Payment üí∏",
      cancelButtonText: "Cancel",
      confirmButtonColor: "#3085d6",
      cancelButtonColor: "#d33",
      preConfirm: (value) => value.trim()
    });

    const rawPhone = phoneInput.value;

    // Validate phone number
    if (!rawPhone || !/^(0(7|1)\d{8})$/.test(rawPhone)) {
      return Swal.fire({
        icon: "error",
        title: "Invalid Phone Number üòû",
        text: "Please enter a valid Kenyan number starting with 07 or 01.",
        background: "linear-gradient(135deg,#fff5f5,#ffe0e0)",
        confirmButtonColor: "#d33",
        showClass: { popup: "animate__animated animate__shakeX" },
        hideClass: { popup: "animate__animated animate__fadeOut" }
      });
    }

    const phone = "254" + rawPhone.substring(1);

    // Payment processing popup
    Swal.fire({
      icon: "info",
      title: "Processing Payment üí´",
      text: "Kindly wait as we initiate M-PESA Express...",
      showConfirmButton: false,
      allowOutsideClick: false,
      background: "linear-gradient(135deg,#fdfbfb,#ebedee)",
      didOpen: () => Swal.showLoading()
    });

    // Assume totalAmount is fetched from your cart/checkout
    const totalAmount = 1200; // replace with your dynamic total

    // Send STK push request
    const res = await fetch("/api/stkpush", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ amount: totalAmount, phone })
    });

    const data = await res.json();
    Swal.close();

    // If STK push is successful
    if (res.ok && data?.ResponseCode === "0") {
      Swal.fire({
        icon: "success",
        title: "STK Push Sent Successfully üéâ",
        text: "Check your phone and enter your M-PESA PIN to complete payment!",
        background: "linear-gradient(135deg,#e0ffe0,#ffffff)",
        confirmButtonColor: "#3085d6",
        showClass: { popup: "animate__animated animate__fadeInDown" },
        hideClass: { popup: "animate__animated animate__fadeOutUp" },
        didOpen: () => {
          const duration = 2000;
          const end = Date.now() + duration;
          (function frame() {
            confetti({ particleCount: 4, angle: 60, spread: 55, origin: { x: 0 } });
            confetti({ particleCount: 4, angle: 120, spread: 55, origin: { x: 1 } });
            if (Date.now() < end) requestAnimationFrame(frame);
          })();
        }
      });

      // ‚úÖ Automatically check payment status every 5 seconds
      const checkStatus = setInterval(async () => {
        try {
          const verify = await fetch("/api/mpesaCallback");
          const result = await verify.json();

          if (result?.status === "paid") {
            clearInterval(checkStatus);
            Swal.fire({
              icon: "success",
              title: "Payment Successful üéä",
              text: "Your payment has been confirmed by M-PESA. Thank you for shopping with Bohemian Integrations üåø",
              background: "linear-gradient(135deg,#e0ffe0,#f0fff4)",
              confirmButtonColor: "#3085d6",
              showClass: { popup: "animate__animated animate__fadeInDown" },
              hideClass: { popup: "animate__animated animate__fadeOutUp" },
              didOpen: () => {
                // Confetti explosion üéâ
                const duration = 2000;
                const end = Date.now() + duration;
                (function frame() {
                  confetti({ particleCount: 4, angle: 60, spread: 55, origin: { x: 0 } });
                  confetti({ particleCount: 4, angle: 120, spread: 55, origin: { x: 1 } });
                  if (Date.now() < end) requestAnimationFrame(frame);
                })();
              }
            });
          }
        } catch (e) {
          console.warn("Payment status check failed", e);
        }
      }, 5000);
    } else {
      Swal.fire({
        icon: "error",
        title: "Payment Failed üòû",
        text: "We were unable to process your M-PESA payment. Please try again.",
        background: "linear-gradient(135deg,#fff5f5,#ffe0e0)",
        confirmButtonColor: "#d33",
        showClass: { popup: "animate__animated animate__shakeX" },
        hideClass: { popup: "animate__animated animate__fadeOut" }
      });
    }

  } catch (error) {
    console.error(error);
    Swal.fire({
      icon: "error",
      title: "Unexpected Error üò¢",
      text: "Something went wrong. Please try again later.",
      background: "linear-gradient(135deg,#fff5f5,#ffe0e0)",
      confirmButtonColor: "#d33"
    });
  }
});
</script>


    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>

<script>
document.getElementById("mpesaExpressBtn").addEventListener("click", async () => {
  try {
    const phone = prompt("Please enter your M-PESA phone number (e.g., 07XXXXXXXX or 01XXXXXXXX):");

    // ‚úÖ Validate Kenyan numbers starting with 07 or 01
    if (!phone || !/^(?:07\d{8}|01\d{8})$/.test(phone)) {
      return Swal.fire({
        icon: 'error',
        title: 'Invalid Phone Number üòû',
        text: 'Please enter a valid Safaricom number starting with 07 or 01.',
        background: 'linear-gradient(135deg,#fff5f5,#ffe0e0)',
        confirmButtonColor: '#d33'
      });
    }

    // Convert to 254 format
    const formattedPhone = "254" + phone.substring(1);

    Swal.fire({
      title: 'Processing Payment ‚è≥',
      html: 'Please approve the STK Push on your phone...',
      allowOutsideClick: false,
      didOpen: () => {
        Swal.showLoading();
      }
    });

    // --- Step 1: Trigger STK Push ---
    const stkResponse = await fetch("/api/stkpush", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ phone: formattedPhone, amount: 1 }) // adjust amount
    });

    const data = await stkResponse.json();
    console.log("STK Response:", data);

    if (!data.CheckoutRequestID) {
      Swal.close();
      return Swal.fire({
        icon: 'error',
        title: 'Payment Error ‚ö†Ô∏è',
        text: 'Could not initiate M-PESA STK Push. Please try again.',
        confirmButtonColor: '#d33'
      });
    }

    const checkoutRequestID = data.CheckoutRequestID;

    // --- Step 2: Poll backend every 5 seconds to check if payment confirmed ---
    const checkPayment = async () => {
      const response = await fetch("/api/checkPayment?checkoutRequestID=" + checkoutRequestID);
      const result = await response.json();

      if (result.status === "paid") {
        Swal.close();

        // üéä SweetAlert + Confetti
        Swal.fire({
          icon: 'success',
          title: 'Payment Successful üéä',
          text: 'Thank you! Your payment has been confirmed by M-PESA.',
          background: 'linear-gradient(135deg,#e0ffe0,#f5fff5)',
          confirmButtonColor: '#28a745',
          didOpen: () => {
            // üéâ Confetti effect
            confetti({
              particleCount: 200,
              spread: 80,
              origin: { y: 0.6 }
            });
          }
        });
        clearInterval(polling);
      } else if (result.status === "failed") {
        Swal.close();
        Swal.fire({
          icon: 'error',
          title: 'Payment Failed ‚ùå',
          text: 'The transaction did not complete. Please try again.',
        });
        clearInterval(polling);
      }
    };

    // Poll every 5s
    const polling = setInterval(checkPayment, 5000);

  } catch (err) {
    console.error(err);
    Swal.close();
    Swal.fire({
      icon: 'error',
      title: 'Error üí•',
      text: 'Something went wrong. Please try again later.'
    });
  }
});
</script>


   <script>
       //leaflet map
let map, marker;

document.getElementById("select-location").addEventListener("click", () => {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      (position) => {
        const lat = position.coords.latitude;
        const lng = position.coords.longitude;

        document.getElementById("map-container").style.display = "block";

        if (!map) {
          // üó∫Ô∏è Initialize Map
          map = L.map('map').setView([lat, lng], 15);
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
          }).addTo(map);

          // üìç Add Draggable Marker
          marker = L.marker([lat, lng], { draggable: true }).addTo(map);

          saveLocation(lat, lng);

          // üéØ Update location when marker is moved
          marker.on('dragend', function () {
            const newPos = marker.getLatLng();
            saveLocation(newPos.lat, newPos.lng);
          });
        } else {
          map.setView([lat, lng], 15);
          marker.setLatLng([lat, lng]);
          saveLocation(lat, lng);
        }
      },
      (err) => alert("‚ö†Ô∏è Please enable location access to use this feature.")
    );
  } else {
    alert("‚ùå Geolocation not supported by this browser.");
  }
});

document.getElementById("confirm-location").addEventListener("click", () => {
  document.getElementById("map-container").style.display = "none";
});

function saveLocation(lat, lng) {
  const mapLink = `https://www.google.com/maps?q=${lat},${lng}`;
  localStorage.setItem("userLocation", JSON.stringify({
    latitude: lat,
    longitude: lng,
    googleMapsLink: mapLink
  }));
  document.getElementById("location-display").innerHTML = 
    `‚úÖ Location pinned! <a href="${mapLink}" target="_blank">View on Map</a>`;
}
</script>







</body>


</html>





















